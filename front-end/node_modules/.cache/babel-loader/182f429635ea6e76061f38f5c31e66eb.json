{"ast":null,"code":"var _jsxFileName = \"/Users/rishabbibhuty/Programmings/react/tinder/front-end/src/pages/Dashboard.js\",\n    _s = $RefreshSig$();\n\nimport TinderCard from 'react-tinder-card';\nimport { useEffect, useState } from 'react';\nimport ChatContainer from '../components/ChatContainer';\nimport axios from 'axios';\nimport { useCookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [genderedUser, setGenderedUser] = useState(null);\n  const [lastDirection, setLastDirection] = useState();\n  const [cookies, setCookie, removeCookie] = useCookies(['user']);\n  const userId = cookies.userID;\n\n  const getUser = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/users/user', {\n        params: {\n          userId\n        }\n      });\n      setUser(response.data);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const getGenderedUser = async () => {\n    try {\n      const response = await axios.get('http://localhost:8000/users/gendered_user', {\n        params: {\n          gender: user === null || user === void 0 ? void 0 : user.gender_interest\n        }\n      });\n      setGenderedUser(response.data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getUser();\n    getGenderedUser();\n  }, [user, genderedUser]);\n\n  const updateUserMatch = async swipedUserId => {\n    try {\n      await axios.put('http://localhost:8000/users/addmatch', {\n        userId,\n        matchUserId: swipedUserId\n      });\n      getUser();\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const swiped = (direction, swipedUserId) => {\n    if (direction === 'right') {\n      updateUserMatch(swipedUserId);\n    }\n\n    setLastDirection(direction);\n  };\n\n  const matchedUserIds = user === null || user === void 0 ? void 0 : user.matches.map(_ref => {\n    let {\n      user_id\n    } = _ref;\n    return user_id;\n  }).concat(userId);\n  const filteredUserIds = genderedUser === null || genderedUser === void 0 ? void 0 : genderedUser.filter(genderedUser => !matchedUserIds.includes(genderedUser.user_id));\n  console.log(gende);\n\n  const outOfFrame = name => {\n    console.log(name + ' left the screen!');\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: user && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard\",\n      children: [/*#__PURE__*/_jsxDEV(ChatContainer, {\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"swipe-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-container\",\n          children: [filteredUserIds === null || filteredUserIds === void 0 ? void 0 : filteredUserIds.map(character => /*#__PURE__*/_jsxDEV(TinderCard, {\n            className: \"swipe\",\n            onSwipe: dir => swiped(dir, character.user_id),\n            onCardLeftScreen: () => outOfFrame(character.first_name),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                backgroundImage: 'url(' + character.url + ')'\n              },\n              className: \"card\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: character.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 13\n            }, this)\n          }, character.user_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"swipe-info\",\n            children: lastDirection && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"You swiped \", lastDirection, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 23\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 4\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 3\n    }, this)\n  }, void 0, false);\n};\n\n_s(Dashboard, \"mv8APQacCrD7gQ+EfdDcu0PHogQ=\", false, function () {\n  return [useCookies];\n});\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/Users/rishabbibhuty/Programmings/react/tinder/front-end/src/pages/Dashboard.js"],"names":["TinderCard","useEffect","useState","ChatContainer","axios","useCookies","Dashboard","user","setUser","genderedUser","setGenderedUser","lastDirection","setLastDirection","cookies","setCookie","removeCookie","userId","userID","getUser","response","get","params","data","err","console","log","getGenderedUser","gender","gender_interest","error","updateUserMatch","swipedUserId","put","matchUserId","swiped","direction","matchedUserIds","matches","map","user_id","concat","filteredUserIds","filter","includes","gende","outOfFrame","name","character","dir","first_name","backgroundImage","url"],"mappings":"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","sourcesContent":["import TinderCard from 'react-tinder-card'\nimport { useEffect, useState } from 'react'\nimport ChatContainer from '../components/ChatContainer'\nimport axios from 'axios'\nimport {useCookies} from 'react-cookie'\nconst Dashboard = () => {\n\n    const [user, setUser] = useState(null)\n    const [genderedUser,setGenderedUser]=useState(null)\n    const [lastDirection, setLastDirection] = useState()\n\t  const [cookies,setCookie,removeCookie] = useCookies(['user'])\n   \tconst userId=cookies.userID\n\n    const getUser=async()=>{\n\t  try{\n\t    const response = await axios.get('http://localhost:8000/users/user',{\n\t\t  params:{userId}\n\t\t})\n\t    setUser(response.data)\n\t  }\n\t  catch(err){\n\t    console.log(err)\n\t  }\n\t}\n\n  const getGenderedUser= async()=>{\n    try{\n      const response=await axios.get('http://localhost:8000/users/gendered_user',{\n        params:{gender:user?.gender_interest}\n      })\n      setGenderedUser(response.data)\n    }\n    catch(error){\n      console.log(error)\n    }\n  }\n\n\n\n\tuseEffect(()=>{\n\tgetUser()\n  getGenderedUser()\n\t},[user,genderedUser])\n\n\n  const updateUserMatch=async(swipedUserId)=>{\n    try{\n      await axios.put('http://localhost:8000/users/addmatch',{\n        userId,\n        matchUserId:swipedUserId\n      })\n\n      getUser()\n    }\n    catch(err){\n      console.log(err)\n    }\n  }\n  \n\n \n  const swiped = (direction, swipedUserId) => {\n      if(direction === 'right'){\n        updateUserMatch(swipedUserId)\n      }\n      setLastDirection(direction)\n  } \n\n  const matchedUserIds=user?.matches.map(({user_id})=>user_id).concat(userId)\n\n  const filteredUserIds=genderedUser?.filter(\n    genderedUser => !matchedUserIds.includes(genderedUser.user_id)\n    )\n\n    console.log(gende)\n\n\n  const outOfFrame = (name) => {\n    console.log(name + ' left the screen!')\n  }\n\n\n\treturn (\t \n    <>\n    {user &&\n\t\t<div className=\"dashboard\">\n\t\t  <ChatContainer user={user} />\n\t\t\t<div className=\"swipe-container\">\n\t\t\t<div className=\"card-container\">\n\t        {filteredUserIds?.map((character) =>\n          <TinderCard \n\t\t\tclassName='swipe' \n\t\t\tkey={character.user_id} \n\t\t\tonSwipe={(dir) => swiped(dir, character.user_id)} \n\t\t\tonCardLeftScreen={() => outOfFrame(character.first_name)}>\n\n            <div style={{ backgroundImage: 'url(' + character.url + ')' }} className='card'>\n              <h3>{character.name}</h3>\n            </div>\n          </TinderCard>\n        )}\n\t\t\t<div className=\"swipe-info\">\n\t\t\t {lastDirection && <p>You swiped {lastDirection} </p> }\n\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\n\t\t</div>\n    }\n    </>\n\t)\n}\n\nexport default Dashboard\n"]},"metadata":{},"sourceType":"module"}